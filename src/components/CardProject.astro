---
import { Image } from "astro:assets";

interface Props {
  title: string;
  description: string;
  image: ImageMetadata;
  imageAlt: string;
  codeLink: string;
  liveLink: string;
  tags: Array<object>;
  loading: any;
}

const {
  title,
  description,
  image,
  imageAlt,
  codeLink,
  liveLink,
  tags,
  loading,
} = Astro.props;
---

<article id="project" class="w-full pb-14 border-solid">
  <Image
    id="project-image"
    class="tablet:w-[380px] rounded-md shadow-xl dark:shadow-slate-300/20 shadow-slate-700/20 mb-4"
    height="450"
    width="800"
    loading={loading}
    src={image}
    alt={imageAlt}
  />
  <div class="flex justify-start pt-2 pb-4 gap-x-3">
    <a
      href={codeLink}
      class="transition duration-150 ease-in-out hover:transform hover:scale-110"
      aria-label="Ver cÃ³digo del proyecto"
      target="_blank"
      rel="noreferrer noopener"
      ><svg
        xmlns="http://www.w3.org/2000/svg"
        class="size-6 text-gray-700 dark:text-white/80"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
        ><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path
          d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5"
        ></path></svg
      ></a
    >
    <a
      href={liveLink}
      class="transition duration-150 ease-in-out hover:transform hover:scale-110"
      aria-label="Ver proyecto en vivo"
      target="_blank"
      rel="noreferrer noopener"
      ><svg
        class="size-6 text-gray-700 dark:text-white/80"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
        ><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path
          d="M21 12v3a1 1 0 0 1 -1 1h-16a1 1 0 0 1 -1 -1v-10a1 1 0 0 1 1 -1h9"
        ></path><path d="M7 20l10 0"></path><path d="M9 16l0 4"></path><path
          d="M15 16l0 4"></path><path d="M17 4h4v4"></path><path d="M16 9l5 -5"
        ></path></svg
      ></a
    >
  </div>
  <h3 class="text-2xl pb-2 dark:text-white/80 text-slate-700 font-semibold">
    {title}
  </h3>
  <p
    class="w-full text-lg text-pretty font-normal dark:text-white/80 text-gray-700"
  >
    {description}
  </p>
  <div class="flex flex-wrap gap-x-4 py-3">
    {
      tags.map((tag) => (
        <div class="min-w-16 h-auto dark:bg-slate-700/60 dark:text-white/80 bg-slate-700 gap-x-1 px-2 p-1 rounded-sm flex justify-center items-center my-1 text-xs">
          <i class={`${tag["className"]}`} />
          {tag["name"]}
        </div>
      ))
    }
  </div>
</article>

<script type="module">
  // CardProject transitions
  const projects = [...document.querySelectorAll("#project")];

  const effectIn = [
      "transition-all",
      "duration-150",
      "delay-50",
      "ease-in",
      "opacity-90",
      "bg-black",
      "transform",
      "scale-105",
      "rotate-1",
      "backward"
    ];

    const effectOut = [
      "transition-all",
      "duration-300",
      "delay-0",
      "ease-out",
      "opacity-100",
      "bg-black",
      "transform",
      "scale-100",
      "rotate-0",
      "forward"
    ];


  function handleEnter(e) {
    const image = e.target.firstElementChild;
    image.classList.add(...effectIn)
    image.classList.remove(...effectOut)
  }

  function handleLeave(e) {
    const image = e.target.firstElementChild;
    image.classList.remove(...effectIn)
    image.classList.add(...effectOut)
  }


  projects.forEach((project) =>
    project.addEventListener("mouseenter", handleEnter)
  );

 

  projects.forEach(project =>
    project.addEventListener("mouseleave", handleLeave)
  );
  
</script>
